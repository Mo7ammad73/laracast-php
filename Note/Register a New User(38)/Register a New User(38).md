# # ุฌูุณู ณธ (Register a New User)

## ูุฏู:

- ุณุงุฎุช ูุฑูย**ุซุจุชโูุงู ฺฉุงุฑุจุฑ ุฌุฏุฏ (User Registration)**
- ุฐุฎุฑู ฺฉุงุฑุจุฑ ุฏุฑ ูพุงฺฏุงู ุฏุงุฏู
- ูุฏุฑุช ูุถุนุช ูุฑูุฏ ฺฉุงุฑุจุฑ ุชูุณุทย**Session**

---

## ๐น ฺฏุงู ฑ: ุงุฌุงุฏ ุณุงุฎุชุงุฑ ูุงูโูุง

ุฏุฑ ุงุจุชุฏุง ุจุฑุง ุณุงุฒูุงูโุฏู ูุณุฑูุง ู ฺฉูุชุฑูุฑูุง:

1. ูพูุดู ุฌุฏุฏ ุฏุฑ ูุณุฑย`controllers`ยูโุณุงุฒู ุจุง ูุงูregistration
2. ุฏุงุฎู ุงู ูพูุดูุ ูุงู ุจุฑุง ููุงุด ูุฑู ุซุจุชโูุงู ุจุง ูุงู create.php ุงุฌุงุฏ ูฺฉูู.
   ู ุจุนุฏ ูุงู ุจู ุงุณู store.php ุจุฑุง ูพุฑุฏุงุฒุด ุฏุงุฏู ูุง ุงุฑุณุงู ูุฑู ูุณุงุฒู.

---

## ๐น ฺฏุงู ฒ: ุงุฌุงุฏ View ุจุฑุง ูุฑู ุซุจุชโูุงู

ุฏุฑ ูพูุดูย`views`ยูุฒ ูพูุดูโ ูุดุงุจู ุงุฌุงุฏ ูโฺฉูู:

`views/registration/create.view.php`

ููุฏุงุฑ ุงููู ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ุงุฒ ูููุง ุขูุงุฏู (ูุซูุงย`index.view.php`) ฺฉูพ ูโุดูุฏ:

```php
  
<?= view("partials/nav.php"); ?>  
<?= view("partials/header.php",['heading' => 'Register']); ?>  
    <main>  
        <div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8">  
            <p>  Register Page   </p>  
        </div>  
    </main><?= view("partials/footer.php"); ?>
```
---
## ๐น ฺฏุงู ณ: ุชุนุฑู Route ุจุฑุง ูุฑู

ุฏุฑ ูุงูย`routes.php`:
```php
$router->get('/laracast-php/public/register' , "controller/registeration/create.php");
```
ุงฺฉููู ุจุง ูุฑุงุฌุนู ุจูย`/laracast-php/public/registerุ ูุฑู ุฎุงู ุฑุง ุฏุงุฑู.

---
## ๐น ฺฏุงู ด: ุทุฑุงุญ ูุฑู (Tailwind)

ฺฉ ูุฑู ุขูุงุฏู ุงุฒ TailwindUI ุฑุง ุจุงุฏ ฺฉูพ ฺฉูู ูพุณ ุจู ุณุงุช tailwindui ุฑูุชู ู ฺฉููู form ุฑุง ุฌุณุชุฌู ฺฉุฑุฏู ุจุนุฏย sign in and registerุฑุง ุงูุชุฎุงุจ ฺฉุฑุฏู ู ฺฉุฏุด ุฑุง ฺฉูพ ู ุฏุฑ ูุงู create.view.php ุฌุง ฺฏุฐุงุฑ ูฺฉูู.

**ุงุตูุงุญุงุช ฺฉูุฏ ูุฑู:**

- ุชุบุฑ ุนููุงู ุจู Register
- ุญุฐู ุจุฎุดย_Forgot password_ยูย_Free trial_
  ููุท ุฏู ููุฏ ูพุณููุฑุฏ ู ุงูู labale ,input ู ฺฉ ุฏฺฉูู ูฺฏู ุฏุงุดุชู ุดูุฏ.
- ููุฏุงุฑย`action`ยูุฑู:
```php
<form action="/laracast-php/public/register" method="POST" class="space-y-6">
```
---
## ๐น ฺฏุงู ต: ุงุถุงูู ฺฉุฑุฏู ููุงุด ูพุงู ุฎุทุง ุฒุฑ ููุฏูุง

ุงุถุงูู ฺฉุฑุฏู ุงู ูุทุนู ุฒุฑ ุงูู:

```php
<?php if(isset($error['email'])): ?>  
    <p class="text-red-500"><?=$error['email'] ?></p>  
<?php endif; ?>
```
ู ูุดุงุจู ุขู ุจุฑุง ูพุณูุฑุฏ.

**ูฺฉุชู:** ุขุฑุงู error ุฏุฑ ุตูุฑุช ูุฌูุฏ ุฎุทุง ุฏุฑ ุงุนุชุจุงุฑุณูุฌ ูุฑู ุฏุฑ ูุงู store ูพุฑุดุฏู ู ุฏุฑุงูุฌุง ููุงุด ุฏุงุฏู ูุดูุฏ.


---

## ๐น ฺฏุงู ถ: ูุณุฑ POST ุจุฑุง ุซุจุชโูุงู

ุฏุฑย`routes.php`:
```php
$router->post('/laracast-php/public/register' , "controller/registeration/store.php");
```
ุนู ููุช ุจุง ุขุฏุฑุณ ูุดุฎุต ุดุฏู ูุชุฏ post ูุฑุณุชุงุฏู ุดุฏ ูุงุฑุฏ ูุงู store ุดูู.

---
## ๐น ฺฏุงู ท: ฺฉูุชุฑู ุฏุงุฏูโูุง ุงุฑุณุงูโุดุฏู (store.php)

ุงุจุชุฏุง ุฏุงุฏูโูุง ุฑุง ูโฺฏุฑู:
```php
$email = $_POST['email'];  
$password = $_POST['password'];
```

---
## ๐น ฺฏุงู ธ: ุงุนุชุจุงุฑุณูุฌ (Validation)

ุงุฒ ฺฉูุงุณ Validator ุงุณุชูุงุฏู ูโฺฉูู   ูุงุจุชุฏุง ฺฉ ุขุฑุงู error ุชุนุฑู ฺฉุฑุฏู ุณูพุณ ุฏู ููุฏ ุงูู ู ูพุณููุฑุฏ ุฑุง ุจุง ฺฉูุงุณ Validatore ู ูุชุฏูุงุด ุงุนุชุจุงุฑุณูุฌ ูฺฉูู ุฏุฑ ุตูุฑุช ูุฌูุฏ ูุดฺฉู ุขุฑุงู error ุดุงูู ููุฏุงุฑ ูุดูุฏ ู ุฏุฑ ุบุฑ ุงูุตูุฑุช ุฎุงู ููุงูุฏ :
```php
$error = [];  
  
if( ! Validator::Validate_email($email) ){  
    $error['email'] = "Invalid email";  
}  
  
$result = Validator::Validate_password($password);  
if (! $result['valid']) {  
    $error['password'] = $result['message'];  
}
```
ุงูุง ุจุง ุฏุณุชูุฑ ุฒุฑ ุชุนุฑู ูฺฉูู  ุฎุทุง ูุฌูุฏ ุฏุงุดุช ุนู error ุดุงูู ููุฏุงุฑ ุจูุฏ ูพุณ ฺฉุงุฑุจุฑ ุฏูุจุงุฑู ุจู ุตูุญู ุซุจุช ูุงู ุจุฑู ู ุนูุช ุฎุทุงูุงุด ุฑู ูู ุจูููู ุจุนุฏ ุจุง ู return  ูฺฏู ฺฉุฏ ูููุฌุง ูุทุน ุจุดู ู ฺฉุฏูุง ุจุนุฏ ุงุฌุฑุง ูุดูุฏ:

```php
if($error) {  
    view("registeration/create.view.php", ['error' => $error]);  
    return;  
}
```

---
## ๐น ฺฏุงู น: ุจุฑุฑุณ ูุฌูุฏ ฺฉุงุฑุจุฑ ุฏุฑ ุฏุชุงุจุณ

ุงุจุชุฏุง ุงุชุตุงู ุจู ุฏุชุงุจุณ:

```php
$db = App::resolve(Database::class);  
$user = $db->query("select * from users where email = :email", [':email' => $email])->get();
```
ุชูุณุท ุฏุณุชูุฑ ุจุงูุง ฺฉ ุด ูพุงฺฏุงู ุฏุงุฏู ุงุฌุงุฏ ฺฉุฑุฏู ู ุณูพุณ ู ุฏุณุชูุฑ query ูุฑ ุงู ุด ูุฒูู ฺฉู ุชูุงู ุฑฺฉูุฑุฏูุง ฺฉู ููุฏ ุงููุดุงู ุจุฑุงุจุฑ ุจุง ุงูู post ุดุฏู ูุณุช ุฑุง ุจุฑฺฏุฑุฏุงูุฏ.
ุงฺฏุฑย**ฺฉุงุฑุจุฑ ููุฌูุฏ ุจูุฏ** ุนู ุฏุณุชูุฑ ุจุงูุง ุดุงูู ุฑฺฉูุฑุฏ ุดุฏยโ ูุนูุง ุจู ุตูุญู ุงุตู ูุฏุงุช ฺฉูู (ุฏุฑ ุขูุฏู ุจู login):
```php
if ($user){  
    header("Location:/laracast-php/public/");  
}
```
ุงูุง  ุงฺฏุฑย**ฺฉุงุฑุจุฑ ุฌุฏุฏ ุงุณุช**ยโ ุงุถุงูู ุจู ุฏุชุงุจุณ ู ุซุจุช ุงุทูุงุนุงุช ุฏุฑย**Session** ูพุณ :
```php
else{  
    $db->query("INSERT INTO users (email, password) values (:email, :password)", [':email' => $email, ':password' => $password]);  
    $_SESSION['user'] =[  'email' => $email  ];  
    header("Location:/laracast-php/public/");  
}
```
---
## ๐น ฺฏุงู ฑฐ: ุชุบุฑ ุฏุฑ Navigation (nav.php)

ุฏุฑ partial ูุฑุจูุท ุจู Navigation (`partials/nav.php`)ุ ุฌุง ุชุตูุฑ ุฑุง ุดุฑุท ูโฺฉูู ุนู ุงฺฏุฑ ฺฉุงุฑุจุฑ ุซุจุช ูุงู ฺฉุฑุฏู ุจูุฏ ุชุตูุฑููุงุด ุฏุงุฏู ุดูุฏ ุฏุฑ ุบุฑุงูุตูุฑุช ฺฉ ููฺฉ ุจู ุตูุญู ุซุจุช ูุงู ฺฏุฐุงุดุชู ุดูุฏ:
```php
<?php if($_SESSION['user'] ?? false): ?>  
    <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="" class="size-8 rounded-full" />  
<?php else: ?>  
    <a href='/laracast-php/public/register' class="text-white z-50 relative">Register</a>  
<?php endif; ?>
```
---
## ๐น ฺฏุงู ฑฑ: ูุดฺฉู ุจุงูโูุงูุฏู โ ูุงูุฏฺฏุงุฑ Session

- ุชุง ููุช ูุฑูุฑฺฏุฑ ุจุงุฒ ุงุณุชุ ูุดุณุช (Session) ุฒูุฏู ูโูุงูุฏ.
- ุญุช ุงฺฏุฑ ูุฑูุฑฺฏุฑ ุจุณุชู ุดูุฏุ ฺููย**PHP Session ุจุง ฺฉูฺฉ**ยฺฉุงุฑ ูโฺฉูุฏุ ููฺฉู ุงุณุช ุชุง ููุจุช ุจุนุฏ ูพุงฺฉ ูุดูุฏ.
- ุฑุงูโุญู ุญุฑููโุง:
    - ุงุณุชูุงุฏู ุงุฒย`session_regenerate_id()`ยุจุนุฏ ุงุฒ ุซุจุชโูุงู/Login
    - ุชุนู ุฒูุงู ุงููุถุง ุจุฑุง Session
    - ุฐุฎุฑู ุงุทูุงุนุงุช ุญุณุงุณ ุฏุฑ ุฏุชุงุจุณ ู ุชุทุจู session_id ุฏุฑ ูุฑ ุฏุฑุฎูุงุณุช.

---

## ๐ ุฌูุนโุจูุฏ

ุฏุฑ ุงู ุฌูุณู ุงุฏ ฺฏุฑูุชู:

1. ุณุงุฎุช ูุฑู ุซุจุชโูุงู ุจุง Tailwind UI
2. ฺฏุฑูุชู ุฏุงุฏูโูุง ุงุฒ ูุฑู
3. ุงุนุชุจุงุฑุณูุฌ ูุฑูุฏโูุง (ุงูู ู ูพุณูุฑุฏ)
4. ุจุฑุฑุณ ูุฌูุฏ ฺฉุงุฑุจุฑ ุฏุฑ ุฏุชุงุจุณ
5. ุฏุฑุฌ ฺฉุงุฑุจุฑ ุฌุฏุฏ ุฏุฑ ุฏุชุงุจุณ
6. ุฐุฎุฑู ูุถุนุช ูุฑูุฏ ุฏุฑ Session
7. ุงุฌุฑุง ุดุฑุท ุฏุฑ Navigation ุจุฑุง ููุงุด ุชุตูุฑ ุง ููฺฉ ุซุจุชโูุงู
---
๐ ุชูุฑู ูพุดููุงุฏ:

- ุฑูุฒ ุนุจูุฑ ูุฑูุฏ ุฑุงย**ูุด (hash)**ยฺฉู ุจุงย`password_hash()`
- ุฏุฑ ุฒูุงู login ุจุงย`password_verify()`ยุจุฑุฑุณ ฺฉู.
- ุณุณุชู logout ุจุณุงุฒ (`session_unset(); session_destroy();`).

---
