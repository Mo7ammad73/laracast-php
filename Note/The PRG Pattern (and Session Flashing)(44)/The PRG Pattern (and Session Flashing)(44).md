**.** **ูุดฺฉู ุงุตู**
ููุช ฺฉุงุฑุจุฑ ูุฑู ูุฑูุฏ (Login) ุฑู ูพุฑ ูโฺฉูู ู ุงุนุชุจุงุฑุณูุฌ (validation) ุดฺฉุณุช ูโุฎูุฑู ุนู ูพุณููุฑุฏ ุง ุฑูุฒ ุนุจูุฑ ุง ูุฑุฏู ุงุดุชุจุงู ุฒุฏู ุดูุฏ  ุง ุงุนุชุจุงุฑุณูุฌ ููุฏูุง ุฏุงุฑุง ุฎุทุง ุจุงุดุฏ (ูุซูุง ุชู ุฑูุฒ ุนุจูุฑ ุงุฒ ุญุฑูู ุจุฒุฑฺฏ ุงูฺฏูุณ ุงุณุชูุงุฏู ุดุฏู ุจุงุดุฏ):
- ูุง  ุชูุณุท ูุงู store ุฏูุจุงุฑู ูููู ูุฑู log in  ุฑู ุจุง ุฎุทุงูุงุด ุจุฑูฺฏุฑุฏููู ุฏุณุชูุฑ ุฒุฑ ุฑุง ุจุฑูฺฏุฑุฏุงูู:
```php
return view("sessions/create.view.php" ,['error' => $form->getErrors()] );
```
- ูุง ููุท **ฺฉ** **View (HTML)** ุจุฑูโฺฏุฑุฏููู (return view).
- ุงู ุนู ูพุงุณุฎ **ฺฉ** **Post request โ HTML** ูุณุช.
- ูุดฺฉู ุงูู: ุงฺฏุฑ ฺฉุงุฑุจุฑ ุตูุญู ุฑู Refresh ฺฉููุ ูุฑูุฑฺฏุฑ ุฏูุจุงุฑู Post ูโูุฑุณุชู โ ุงุญุชูุงู **ุงุฑุณุงู ุฏูุจุงุฑู ูุฑู**.ุนู ูุฑุจุงุฑ ฺฉู Refresh ูฺฉูู ุงูฺฏุงุฑ ุฏฺฉูู log in ุฒุฏู ูุดู.
- ูุดฺฉู ุฏูู: ุงฺฏุฑ ฺฉุงุฑุจุฑ ุจู ุตูุญูโ ุฏฺฏุฑ ุจุฑู ู ุจุนุฏ ุฏฺฉูู Back ุฑู ุจุฒูู โ ูุฑูุฑฺฏุฑ ุฎุทุง **Document Expired** ูุดูู ูโุฏู.
---
#### ูุฑู ุฎุทุง Confirm Form Resubmission ุจุง Document Expired ุฏุฑ ูุฑูุฑฺฏุฑ
#### ุฎุทุง Confirm Form Resubmission

- ุงู ูพุบุงู ููุช ุธุงูุฑ ูโุดูุฏ ฺฉู ฺฉุงุฑุจุฑ ฺฉ ูุฑู ุฑุง ุจุง ูุชุฏ POST ุงุฑุณุงู ฺฉุฑุฏู ู ุจุนุฏ ุฏฺฉูู Reload ุง Back ูุฑูุฑฺฏุฑ ุฑุง ุจุฒูุฏ.
- ูุฑูุฑฺฏุฑ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุฑุณุงู ูุฌุฏุฏ ุฏุงุฏู (ูุซูุงู ุชุฑุงฺฉูุด ูุงู ุง ุซุจุช ูุฑู ุชฺฉุฑุงุฑ)ุ ุงู ูพุงู ุชุฃุฏ ุฑุง ูุดุงู ูโุฏูุฏ ฺฉู ุขุง ูุงูุนุงู ูโุฎูุงูุฏ ุฏูุจุงุฑู ุฏุงุฏูโูุง ุฑุง ุงุฑุณุงู ฺฉูุฏ.
- ูุนูููุงู ุจุฑุง ูุญุงูุธุช ุงุฒ ฺฉุงุฑุจุฑ ุงุณุช ุชุง ุงุทูุงุนุงุช ููู ุง ุญุณุงุณ ุฏูุจุงุฑ ุงุฑุณุงู ูุดูุฏ.
#### ุฎุทุง Document Expired
- ุงู ูพุงู ุฒูุงู ูโุขุฏ ฺฉู ุตูุญูโุง ฺฉู ฺฉุงุฑุจุฑ ุจู ุขู ุจุงุฒ ูโฺฏุฑุฏุฏ (ูุซูุงู ุจุง Back ุง Reload ุฑู ุตูุญุงุช ุญุณุงุณ ุง ูุฑูโูุง)ุ ุฏฺฏุฑ ุฏุฑ ฺฉุด ูุฑูุฑฺฏุฑ ููุฌูุฏ ูุณุช ุง ูุฑูุฑฺฏุฑ ุจู ุฏูุงู ุงููุช ุงุฌุงุฒู ููุงุด ูุฌุฏุฏ ุขู ุฑุง ููโุฏูุฏ.
- ูุซูุงู ุงฺฏุฑ ฺฉ ูุฑู ุจุง ุฏุงุฏู ุญุณุงุณ ุงุฑุณุงู ุดูุฏ ู ุจุนุฏ ุจุฎูุงูุฏ ุจุง Back ุจุฑฺฏุฑุฏุฏุ ูุฑูุฑฺฏุฑ ูโฺฏูุฏ "ุงู ุณูุฏ ูููุถ ุดุฏู ุงุณุช" ุชุง ุงุฒ ููุงุด ูุงุฎูุงุณุชู ุงุทูุงุนุงุช ุฌููฺฏุฑ ฺฉูุฏ.
- ูุนูููุงู ูุงุฒ ุจู ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ ุตูุญู (refresh) ุฎูุงูุฏ ุจูุฏ ู ฺฏุงู ุงููุงุช ูู ุงุตูุงู ุฏฺฏุฑ ุขู ุตูุญู ุฏุฑ ุฏุณุชุฑุณ ูุฎูุงูุฏ ุจูุฏ.
## ุฌุฏูู ููุงุณู

| ูพุงู                      | ุนูุช ุงุตู                       | ฺู ุฒูุงู ุฑุฎ ูโุฏูุฏ                        | ุฑูุชุงุฑ ฺฉุงุฑุจุฑ ุง ูุฑูุฑฺฏุฑ                                                                                                          |
| ------------------------- | ------------------------------ | ----------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| Confirm Form Resubmission | ุงุฑุณุงู ูุฌุฏุฏ ูุฑู ุจุง POST         | Reload ุง Back ุจุนุฏ ุงุฒ ุณุงุจูุช ูุฑู          | ูพุฑุณุด ุชุฃุฏ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุฑุณุงู ูุฌุฏุฏ ุฏุงุฏู[](https://www.addictivetips.com/windows-tips/confirm-form-resubmission-on-refresh/) |
| Document Expired          | ุณูุฏ ฺฉุดโุดุฏู ูพุงฺฉ ุดุฏู ุง ุญุณุงุณ ุงุณุช | ุจุฑฺฏุดุช ุง ููุฑูุงุฑุงุฏ ุฑู ุตูุญุงุช ุญุณุงุณ ุง ูููุถ | ููุงุด ุงุฎุทุงุฑ ู ุงุบูุจ ูุงุฒ ุจู reload ุง ุจุฑฺฏุดุช ุจู ุตูุญู ูุจู[](https://support.mozilla.org/si/questions/1414072)                    |

ุฏุฑ ูุชุฌูุ ูพุงู Confirm Form Resubmission ุฏุฑุจุงุฑู ุงุฑุณุงู ุฏูุจุงุฑู ูุฑู ู ุฌููฺฏุฑ ุงุฒ ุฏุงุฏู ุชฺฉุฑุงุฑ ุงุณุชุ ุฏุฑุญุงู ฺฉู Document Expired ุจุดุชุฑ ุจู ุฎุงุทุฑ ุงููุช ู ูพุงฺฉ ุดุฏู ุตูุญุงุช ฺฉุดโุดุฏู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฏูุจุงุฑู ููุงุด ุฏุงุฏู ุญุณุงุณ ูุดุฏุงุฑ ูโุฏูุฏ.

---
### ุฑุงูโุญู (ุงูฺฏู **PRG = Post โ Redirect โ Get**)

1. ฺฉุงุฑุจุฑ ูุฑู ุฑู **POST** ูโฺฉูู.(P)
2. ุณุฑูุฑ ุงฺฏุฑ ุฎุทุง ุฏุงุดุช (ูุซูุงู ุงุนุชุจุงุฑุณูุฌ fail ุดุฏ)ุ ุจู ุฌุง ุงูฺฉู ููููุฌุง ูู ุฑู `return` ฺฉููุ ุจุงุฏ **Redirect** ฺฉูู (ูุซูุงู ุจู `/login`). ุงู Redirect ู ูพุงุณุฎ ุจุง **ฺฉุฏ 302** ูโุฏู.(R)
3. ูุฑูุฑฺฏุฑ ููุช Redirect ุฑู ุฏุฏุ ุฎูุฏุด ู **GET** ุฏุฑุฎูุงุณุช ุฌุฏุฏ ุจู `/login` ูโุฒูู.(G)
4. ุญุงูุง ุตูุญู Login ุงุฒ ูู ููุฏ ูุดู (ุจุฏูู ุฑุณฺฉ ุชฺฉุฑุงุฑ POST).
### ฺุฑุง ุงู ุจูุชุฑูุ

- ุฏฺฏู ุจุง ุฑูุฑุดุ ุฏูุจุงุฑู POST ููโุดู โ ุฎุทุง "Confirm Form Resubmission" ุงุฒ ุจู ูุฑู.
- ุฏฺฉูู Back/Forward ูุฑูุฑฺฏุฑ ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูู.
- ุฌูู ุงุฑุณุงู ฺูุฏุจุงุฑูโ ูุฑู ฺฏุฑูุชู ูุดู.

๐ ุฎูุงุตู:  
ูุดฺฉู ุงุตู ุงูู ฺฉู ููุช ุชู ูุชุฏ `store` ูุณุชูู `return view()` ูโุฒููุ ูุฑูุฑฺฏุฑ ูฺฉุฑ ูโฺฉูู ูุชุฌูโ **POST** ู ุตูุญู ุงุณุช ู ุจุง ูุฑ Refresh ูโุฎูุงุฏ ูููู POST ุฑู ุชฺฉุฑุงุฑ ฺฉูู.  
ุงูฺฏู **PRG** ุงู ุฑู ุญู ูโฺฉูู:

- ุญุฑู **P**: ูุฑู POST ูุดู.
- ุญุฑู **R**: ุณุฑูุฑ Redirect ูโฺฉูู (ณฐฒ).
- ุญุฑู **G**: ูุฑูุฑฺฏุฑ ุฏูุจุงุฑู GET ูโฺฉูู ู ุตูุญู ููุฏ ูุดู.
---
## ููุธูุฑ ุงุฒ ุฑุฏุงุฑฺฉุช ุจุง ฺฉุฏ 302 ฺูุ
### ฺฉุฏูุง ูุถุนุช (HTTP Status Codes)

ูุฑ ุจุงุฑ ุณุฑูุฑ ูพุงุณุฎ ุจู ูุฑูุฑฺฏุฑ ูโุฏูุ ููุฑุงูุด ฺฉ **Status Code** ูู ูโูุฑุณุชู.  
ูุซูุงู:
- ฺฉุฏ `200 OK` โ ุนู ุฏุฑุฎูุงุณุช ูููู ุจูุฏ.
- ฺฉุฏ `404 Not Found` โ ุนู ุตูุญู ูพุฏุง ูุดุฏ.
- ฺฉุฏ `500 Internal Server Error` โ ุนู ุฎุทุง ุณูุช ุณุฑูุฑ.

---
### ฺฉุฏ 302 (Found / Redirect)
ููุช ุณุฑูุฑ ุจุฎูุงุฏ ุจู ูุฑูุฑฺฏุฑ ุจฺฏู:  
ยซุงูุฌุง ุฌูุงุจ ุงุตู ูุณุชุ ุจุฑู ู ุขุฏุฑุณ ุฏฺฏู ุฑู ุฏุฑุฎูุงุณุช ฺฉูยป โ ุงุฒ **ฺฉุฏ 302** ุงุณุชูุงุฏู ูโฺฉูู.
ุจู ุงู ูโฺฏู **Redirect (ุงูุชูุงู)**.

---
### ูุซุงู ุณุงุฏู
ูุฑุถ ฺฉู ุชู ูุชุฏ `store` ุจุนุฏ ุงุฒ ุจุฑุฑุณ ูุฑู ูุงฺฏูุ ุฑูุฒ ุนุจูุฑ ุงุดุชุจุงู ุจุงุดู:
```php
public function store()
{
    // ูุฑุถ: ุงุนุชุจุงุฑุณูุฌ ุงูุฌุงู ุดุฏ ู ุฎุทุง ุฏุงุดุช
    return redirect('/laracast-php/public/login'); // ุงูุฌุง ูุงุฑุงูู ุฎูุฏุด 302 ูโูุฑุณุชู
}
```

ุงู ูพุงุณุฎ HTTP ฺุฒ ุดุจู ุงู ูุดู:
```text
`HTTP/1.1 302 Found Location: /laracast-php/public/login`
```
ูุฑูุฑฺฏุฑ ููุช ุงูู ุฏุฏ:
1. ูุชูุฌู ูุดู ุณุฑูุฑ ฺฏูุชู "ุงูุฌุง ููุ ุจุฑู ู ุฌุง ุฏฺฏู".
2. ุฎูุฏุด ู ุฏุฑุฎูุงุณุช ุฌุฏุฏ ุจู `/laracast-php/public/login` ุจุง ูุชุฏ **GET** ูโูุฑุณุชู.
3. ูุชุฌู โ ุตูุญู ูุงฺฏู ุฏูุจุงุฑู ููุฏ ูุดู ุจุฏูู ุงูฺฉู POST ุชฺฉุฑุงุฑ ุจุดู.
---
### ฺุฑุง ููููุ
- ุงฺฏุฑ `200` ุจุงุดู (ุนู ููููุฌุง ูู ุจุฑฺฏุฑุฏู) โ ูุฑูุฑฺฏุฑ ูฺฉุฑ ูโฺฉูู ูุชุฌูโ POST ููู HTML ุจูุฏู. ุจุง Refreshุ ุฏูุจุงุฑู POST ุชฺฉุฑุงุฑ ูุดู.
- ุงฺฏุฑ `302` ุจุงุดู โ ูุฑูุฑฺฏุฑ ุณุฑุน ูุฑู ุจู ู GET ุฌุฏุฏ. ูพุณ ูุดฺฉู **Confirm Form Resubmission** ุญู ูุดู.
  ุนู **302 ูพู ุจู POST ู GET** ูุณุช.
---

## ุจุฑู ุจุฑุง ุญู ูุดฺฉู
ุจู ูุงู store ุฑูุชู  ูุจูุง ฺฉุฏ ูุง ุจู ุตูุฑุช ุฒุฑ ุจูุฏ:
```php
return view("sessions/create.view.php" ,
['error' => $form->getErrors()] 
);
```
ุนู ูุณุชููุงู ูููู HTML ูู ูุงฺฏู ุฑู ุจุฑูโฺฏุฑุฏููุฏู (ุจุง status code 200).
ุงูุงู :
```php
return Redirect("/laracast-php/public/login");
```
ุนู ู **302 Redirect** ุจุฑูโฺฏุฑุฏููู ุจู ูุฑูุฑฺฏุฑ. ูุฑูุฑฺฏุฑ ูุฑู ุฏูุจุงุฑู ุจุง laracast-php/public/login   GET   ุฑู ูุงุฑู.

---
### ูุดฺฉู ุฌุฏุฏ
ุฎุจ ุญุงูุง ุจุง ุงู ุฑูุด ูุดฺฉู **Confirm Form Resubmission** ุญู ุดุฏ โ  
ูู ู ุณุคุงู ููู ูพุด ุงููุฏ:  
ููุช ูุง Redirect ฺฉุฑุฏูุ ุงุทูุงุนุงุช ุฎุทุง (ูุซู "ุฑูุฒ ุนุจูุฑ ุงุดุชุจุงู ุงุณุช") ุฏฺฏู ุชู ุฑฺฉูุฆุณุช ุฌุฏุฏ ูุฌูุฏ ูุฏุงุฑู โ
- ูุจูุด ูุง `$errors` ุฑู ูุณุชูู ูโุฏุงุฏู ุจู ูู.
- ูู ุงูุงู ฺูู ู ุฏุฑุฎูุงุณุช ุฌุฏุฏ (GET) ุฒุฏู ูุดูุ ุฏฺฏู ุงูู `$errors` ุงุฒ ุจู ูุฑู.
### ุฑุงูโุญู: ุงุณุชูุงุฏู ุงุฒ **Session**
ุฌูุฑ ุงูุฌุง ูฺฏู:  
ยซุงุฏุชููู ฺูุฏ ุฌูุณู ูุจู ุงุฏ ฺฏุฑูุชู ุงุฒ **Session** ุงุณุชูุงุฏู ฺฉููุ ุฎุจ ุงูุงู ุฏููุงู ููููู. ูุง ุจุงุฏ ุฎุทุงูุง ุฑู ุจุฐุงุฑู ุฏุงุฎู Sessionุ ุจุนุฏ ุชู ุตูุญู ุจุนุฏ (GET login) ุงููุง ุฑู ุจุฎููู ู ูุดูู ุจุฏู.ยป
ุงู ุฏููุงู ูููู ฺฉุงุฑู ฺฉู ูุงุฑุงูู ุชู ูพุดุชโุตุญูู ุงูุฌุงู ูุฏู.
ูพุณ ุฏุฑ ูุงู store  ฺฉุฏ ุฒุฑ ุฑุง ูููุณู:
```php
$_SESSION['error'] = $form->getErrors();  
return Redirect("/laracast-php/public/login");
```
ุจุนุฏ ุจู ูพูุดู http/controller/sessions ุฑูุชู ู ุฏุฑ ูุงู create.php  ููุฏุงุฑ session ุฑู ูพุงุณ ูุฏูู:
```php
view("sessions/create.view.php",['error' => $_SESSION['error'] ?? [] ]);
```
ุญุงูุง ุฎุทุงูุง ูู ููุงุด ุฏุงุฏู ูุดูุฏ ูู ููุฏุงุฑุดุงู ูพุงฺฉ ููุดูุฏ ุงฺฏุฑ ุจุฑ ุฑู ฺฉ ููู ุฏฺฏุฑ ุจุฑูู ุจุนุฏ ุฏูุจุงุฑู ุจู loginุจุฑฺฏุฑุฏู ูุจูู ฺฉู ูููู ุฎุทุงูุง ููุงุด ุฏุงุฏู ูุดููุฏ ุจุฑุง ุญู ุงู ูุดฺฉู:
### ฑ. ุฐุฎุฑู ฺฉุฑุฏู ุฎุทุง ูุจู ุงุฒ ุฑุฏุงุฑฺฉุช
ุฏุฑ ูุชุฏ `store` (ุฌุง ฺฉู ูุฑู login ูพุฑุฏุงุฒุด ูุดู):
- ุงฺฏุฑ ุงุนุชุจุงุฑุณูุฌ fail ุดุฏ โ ูุจู ุงุฒ `redirect` ฺฉุฑุฏูุ ุฎุทุงูุง ุฑู ูโุฐุงุฑู ุฏุงุฎู Session.
```php
$_SESSION ['_flashed']['error'] = $form->getErrors();  
return Redirect("/laracast-php/public/login");
```
### ฒ. ุงุณุชูุงุฏู ุงุฒ Session ุฏุฑ ฺฉูุชุฑูุฑ login
ููุช ุฏูุจุงุฑู GET ุจู `/login` ูุงุฏ:
- ูุง ุชู ฺฉูุชุฑูุฑ loginุ ุฎุทุงูุง ุฑู ุงุฒ Session ูโุฎููู.
- ููุธูุฑ ุงุฒ ฺฉูุชุฑูุฑ login ูููู ูุงู create.php ูุณุช .
- ุญุงูุง error ุดุงูู ููุงุฏุฑ ุฎุทุงูุง ูุณุช ู ุฏุฑ ูุงู create.view ูุงุจู ุงุณุชูุงุฏู ูุณุช.
```php
view("sessions/create.view.php",['error' => $_SESSION['_flashed']['error'] ?? [] ]);
```
### ณ. ูพุงฺฉ ฺฉุฑุฏู ุฏุงุฏูโูุง ููุด ุจุนุฏ ุงุฒ ฺฉ ุจุงุฑ ุงุณุชูุงุฏู
ุงุฑุงุฏ ฺฉู ุฌูุฑ ฺฏูุช: ุงฺฏู ูููุฌูุฑ ุจุฐุงุฑูุ ุงู ุฎุทุงูุง ุจุฑุง ฺฉู ุทูู ุนูุฑ session ูโูููู โ  
ูพุณ ุจุงุฏ **ุจุนุฏ ุงุฒ ุงูฺฉู ฺฉ ุจุงุฑ ูู ูุงฺฏู ุฑู ููุฏ ฺฉุฑุฏูุ ุฎุทุงูุง ุฑู ุญุฐู ฺฉูู**.
ุงู ฺฉุงุฑ ุฑู ุชู ููุทูโ ูุฑูุฏ (index.php) ุจุนุฏ ุงุฒ ุงุฌุฑุง ูุชุฏ `route` ุงูุฌุงู ุฏุงุฏ:
```php
$router->route($url, $method);  
unset($_SESSION['_flashed']);
```
### ูุชุฌู
- ุฎุทุงูุง ููุท ุจุฑุง **ุฏุฑุฎูุงุณุช ุจุนุฏ** ุฏุฑ ุฏุณุชุฑุณ ูุณุชู.
- ุจุนุฏุด ุฎูุฏฺฉุงุฑ ูพุงฺฉ ูโุดู.
- ุจู ุงู ูโฺฏู **flash data** (ุจุฑุนฺฉุณ session ูุนููู ฺฉู ุชุง ูพุงุงู session ูุฑูุฑฺฏุฑ ุจุงู ูโูููู).
---
##### . ฺุฑุง ุฌูุฑ `$_SESSION['_flash']` ูุนุฑู ฺฉุฑุฏ (ูฺฏู ุจุง `$_SESSION['error']`ููุดุฏ)ุ

ุฌูุฑ ุงู ฺฉุงุฑู ฺฉุฑุฏ ฺฉู **ูุฑู ุจู ุฏุงุฏูโูุง ูุนููู session ู ุฏุงุฏูโูุง ฺฉู ููุท ูููุช ูุณุชู (flash data)** ูุดุฎุต ุจุงุดู.
- ุจุนุถ ุฏุงุฏูโูุง ูุซู **user_id** ุจุงุฏ ุจุฑุง ฺฉู ุนูุฑ session ุจูููู.
- ุจุนุถ ุฏุงุฏูโูุง ูุซู **validation errors** ููุท ุจุฑุง ฺฉ ุฏุฑุฎูุงุณุช ุจุนุฏ ูุงุฒูู ู ุจุงุฏ ุจุนุฏุด ุญุฐู ุจุดู.
  ุงฺฏู ูููโฺุฒู ุจุง ู ุงุณู ูุซู `$_SESSION['errors']` ุฐุฎุฑู ฺฉูู:
- ุชุดุฎุต ุงูฺฉู ฺฉุฏูู ุฏุงุฏู ุฏุงุฆูู ู ฺฉุฏูู ูููุชุ ุณุฎุช ูุดู.
- ููฺฉูู ุงุดุชุจุงู ู ุฌุง ุฏฺฏู `errors` ุงุณุชูุงุฏู ฺฉูู ู ููุฏฺฏู ุฑู override ฺฉูู.
---
### ููุณููโ `flash` ุฏุฑ ูุฑูโูุฑฺฉโูุง

ูุงุฑุงูู ูู ุฏููุงู ููู ฺฉุงุฑู ูโฺฉูู:
- ุฏุงุฏูโูุง ุฏุงุฆู โ ุฏุงุฎู session ูุนููู.
- ุฏุงุฏูโูุง ูููุช โ ุฏุงุฎู flash session.
  ฺูู flash ฺฉ ูููููู ฺฉู ูฺฏู:  
  ยซุงู ุฏุงุฏู ููุท ุจุฑุง **next request** ูุนุชุจุฑู. ุจุนุฏุด ูพุงฺฉ ฺฉู.ยป
### ฺุฑุง `_flash`ุ
ุงูู underscore (ุง ุญุช ุฏูุชุง `__`) ููุท ุจุฑุง ุงูู ฺฉู ุงุญุชูุงู ุชุฏุงุฎู ุจุง ฺฉูุฏูุง session ูุนููู ฺฉู ุจุดู.  
ูุซูุงู ุดุงุฏ ุฎูุฏุช ู ุฑูุฒ `$_SESSION['errors']` ุจุฑุง ฺุฒ ุบุฑ ุงุฒ validation ุจุฒู. ุจุง `_flash['errors']` ุฏฺฏู ูุงุท ููุดู.

---
# ฺฉูุงุณsession
###  ฺุฑุง ฺฉูุงุณ Session ุณุงุฎุชู ุดุฏุ
ูุจูุงู ูุง ูุณุชูู ุจุง `$_SESSION` ฺฉุงุฑ ูโฺฉุฑุฏู:
```php
$_SESSION['errors'] = ['Invalid email'];
```
ูู ูุดฺฉู ุงู ุจูุฏ ฺฉู:
- ูุฌุจูุฑ ุจูุฏู ูุฏุงู ฺฉูุฏูุง (`_flashed`ุ `errors` ู โฆ) ุฑู ุฏุฑ ุฌุงูุง ูุฎุชูู ุชฺฉุฑุงุฑ ฺฉูู โ ุณุฎุช ูฺฏูุฏุงุฑ.
- ููโุชููุณุชู ุฑูุชุงุฑูุง ุฎุงุต ูุซู **flash ุดุฏู** (ููุท ฺฉ ุฏุฑุฎูุงุณุช ุนูุฑ ุฏุงุดุชู ุจุงุดู) ุฑู ุจูโุณุงุฏฺฏ ูุฏุฑุช ฺฉูู.
- ฺฉุฏ ุดููุบ ู ุบุฑููุนุทู ูโุดุฏ.
  ุจุฑุง ููู Jeff ุงููุฏ ฺฉ **ฺฉูุงุณ Session** ููุดุช ุชุง ููู ุงู ฺฉุงุฑูุง ูุชูุฑฺฉุฒ ุจุดู.
---
### 2. ูุชุฏูุง ูพุงูโุง

๐น ูุชุฏ **put** โ ฺุฒ ุฏุงุฎู ุณุดู ุจุฐุงุฑู
```php
public static function put($key, $value) {
    $_SESSION[$key] = $value;
}
```
๐นูุชุฏ **get** โ ฺุฒ ุงุฒ ุณุดู ุจฺฏุฑู (ุจุง ุงูฺฉุงู ุชุนู ููุฏุงุฑ ูพุดโูุฑุถ ุงฺฏุฑ ูุฌูุฏ ูุฏุงุดุช)
```php
public static function get($key , $default = null){  
    return $_SESSION['_flashed'][$key] ?? $_SESSION[$key] ?? $default;  
}
```
๐น ูุชุฏ **has** โ ุจุฑุฑุณ ฺฉูู ฺฉูุฏ ุชู ุณุดู ูุณุช ุง ูู
```php
public static function has($key) {
    return isset($_SESSION[$key]);
}
//or
public static function has($key){  
    return bool(static::get($key));  
}
```
### ูุชุฏ Flash
```php
public static function flash($key , $value){  
    $_SESSION['_flashed'][$key] = $value;  
}
```

ุงู ุจุฎุด ููููู ฺฉู ูุจูุงู ุฏุณุช ุงูุฌุงู ูโุฏุงุฏู:
```php
$_SESSION['_flashed']['errors'] = ['Invalid email'];
```
ุญุงูุง ูโุดู ุฑุงุญุช ฺฏูุช:
```php
Session::flash('errors', ['Invalid email']);
```
ู ฺฉูุงุณ ุฎูุฏุด ูโูููู ฺฉู ุจุงุฏ ุฏุงุฎู `$_SESSION['_flashed']` ุฐุฎุฑู ุจุดู.

---
###  ูุชุฏ Unflash
ููุช ุตูุญู ุฌุฏุฏ ููุฏ ุดุฏุ ููุดโูุง ุจุงุฏ ูพุงฺฉ ุจุดู (ฺูู ููุท ฺฉ ุจุงุฑ ุจุงุฏ ููุงุด ุฏุงุฏู ุจุดู).  
ุจุฑุง ููู ฺฉ ูุชุฏ **unflash** ฺฏุฐุงุดุช:
```php
public static function unflash() {
     unset($_SESSION['_flashed']);
 }
```

ุฏฺฏู ูุงุฒ ูุณุช ุชู ูุฑ ุตูุญู ุฏุณุช `unset($_SESSION['_flashed'])` ุจููุณู.
### ุฏุณุชุฑุณ ุจู Flash ุฏุฑ get

ูุฏุฑุณ Jeff ููโุฎูุงุณุช ุฌุง ุฏฺฏูโูุง ุจุฏููู ฺฉูุฏ `_flashed` ูุฌูุฏ ุฏุงุฑู.  
ูพุณ ุฏุงุฎู **get** ฺฉ ฺฺฉ ุงุถุงูู ฺฉุฑุฏ:
- ุงูู ุจุฑุฑุณ ฺฉู ฺฉูุฏ ุชู `_flashed` ูุณุช ุง ูู.
- ุงฺฏุฑ ูุจูุฏุ ุจุฑู ุชู ุณุทุญ ุงุตู `$_SESSION`.
- ุงฺฏุฑ ุจุงุฒ ูู ูุจูุฏ โ ููุฏุงุฑ ูพุดโูุฑุถ ุฑู ุจุฑฺฏุฑุฏูู.
  ุนู ฺฉุฏ ูุซู:
```php
$errors = Session::get('errors');
```
ุฎูุฏุด ูโูููู ุจุงุฏ ุงุฒ ููุด ุจุงุฑู ุง ุณุดู ุนุงุฏ.  
ุฏฺฏู ูุงุฒู ูุณุช ูุง ุจุฏููู ูพุดุช ุตุญูู ฺุฌูุฑ ุฐุฎุฑู ุดุฏู.

---
### ูุชุฏูุง ฺฉูฺฉ ููุง

- ูุชุฏ **flush()** โ ฺฉู ุณุดู ุฑู ุฎุงู ูโฺฉูู:
```php
public static function flush() {
    $_SESSION = [];
}
```
- ูุชุฏ **destroy()** โ ฺฉู ุณุดู ุฑู ูุงุจูุฏ ูโฺฉูู (ูุซู logout):
 ```php
$_SESSION['_flashed']['errors'] = $errors;
header('Location: /login');
exit();  
  ```

---

โ ูุชุฌู:  
ฺฉุฏ ฺฉู ูุจูุงู ุดููุบ ุจูุฏ ูุซู:
```php
$_SESSION['_flashed']['errors'] = $errors;
header('Location: /login');
exit();
```

ุญุงูุง ุฎู ุชูุฒ ูโุดู:
```php
Session::flash('errors', $errors);
return redirect('/laracast-php/public/login');
```

---
## ูุชุฏ logout
ุชู ฺฉูุงุณ **Authenticator**ุ ุจุฑุง logout ุงูุทูุฑ ููุดุชู ุจูุฏ:
```php
$_SESSION = [];  
session_destroy();  
$params = session_get_cookie_params();  
setcookie('PHPSESSID', '', time() - 3600,$params['path'],$params['domain'],$params['secure'],$params['httponly']);
```
ุงู ุนู:
- ฺฉู ุฏุงุฏูโูุง ุณุดู ุฎุงู ุจุดู
- ุฎูุฏ ุณุดู ุงุฒ ุจู ุจุฑู
- ฺฉูฺฉ session ูู ุญุฐู ุจุดู
  ูู ุฎุจ ุงูุง ุจู **Session** ูุฑุจูุทู ูู ุจู **Authenticator**.
### ุงูุชูุงู ุจู ฺฉูุงุณ Session

ุฌูุฑ ฺฏูุช ุจุงู ุงู ููุทู ุฑู ุชูุฒ ฺฉูู ู ุจุจุฑูุด ุฏุงุฎู ฺฉูุงุณ Session.  
ูพุณ ฺฉ ูุชุฏ ุฌุฏุฏ ุจู ุงุณู `destroy` ุณุงุฎุช:
```php
class Session
{
    // ... ูุชุฏูุง put, get, has, flash, unflash, flush ...

    public static function destroy()
    {
        // ููู ุฏุงุฏูโูุง session ุฑู ุฎุงู ฺฉู
        $_SESSION = [];

        // ุงฺฏู ุงุฒ ฺฉูฺฉ ุจุฑุง session ุงุณุชูุงุฏู ูโฺฉููุ ุงููู ูพุงฺฉ ุจุดู
        if (ini_get("session.use_cookies")) {
            $params = session_get_cookie_params();
            setcookie(
                session_name(),
                '',
                time() - 42000,
                $params["path"],
                $params["domain"],
                $params["secure"],
                $params["httponly"]
            );
        }

        // ุฎูุฏ session ุฑู ุงุฒ ุจู ุจุจุฑ
        session_destroy();
    }
}
```
ุญุงูุง ุชู **Authenticator** ุจู ุฌุง ุงูู ฺฉุฏูุง ุชฺฉุฑุงุฑุ ููุท ูโฺฏู:
```php
Session::destroy();
```