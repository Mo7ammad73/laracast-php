ฺฉ ูฺฉุชู ูุจู ุงุฒ ุดุฑูุน ุงู ุฌูุณู ุจฺฏู ูุงูู ุงูู ููุช ุตูุญู log in ุง ูุฑุตูุญู ุฏฺฏู ุง ฺฉู ูุฑู ุฏุงุฑู ุจู ุตูุฑุช ูพุด ูุฑุถ ููุฏูุง ุฌุนุจู ูุชูุด ููฺฉู ุจุง ุงุทูุงุนุงุช ูพุฑ ุจุดู ุชฺฏ input  ุฏุฑ html ุตูุช autocomplete ุฏุงุฑู ุงฺฏุฑ ูุซูุง ููุฏุงุฑุด email ุจุงุดู ูุงุฏ ู ุงูู ูพุด ูุฑุถ ูุฑูุฑฺฏุฑ ุฑู ุฏุงุฎูุด ุฐุฎุฑู ูฺฉูู ูพุณ ุจุงุฏ ููุฏุงุฑ ุงููู ุนูุถ ฺฉูู ูุซูุง new-email ฺฉู ูฺ ุฌุง ูุณุช ููู ุตูุช ุฑู ุจุฑุง ุชฺฏ input ูุฑุจูุท ุจู ูพุณููุฑุฏ ูู ุนูุถ ูฺฉูู ุญุงูุง ุชู ุจุฎุด value ูุฑุจูุท ุจู ุงู ุชฺฏ ูุง ุงฺฏุฑ ฺฉุฏ ูุซู
```php
value=<? $_POST['email'] ?? ' '; ?>
```
ุฏุฑุณุช ฺฉุงุฑูฺฉูุฏ ุถููุง ุงฺฏุฑ ุงู ุตูุช ุฑุง off ฺฉูู ููุฏุงุฑุด ุฑุง ุฏฺฏุฑ ุงูู ูุง ูพุดููุงุฏ ููุงุด ุฏุงุฏู ููุดูุฏ.

---
# ุฌูุณู 45
## ๐น ูุดฺฉู ุงููู

ูุจูุงู ุงฺฏุฑ ูุฑู ูุงฺฏู ุฑู ุจุง ุฏุงุฏูโ ุงุดุชุจุงู ูพุฑ ูโฺฉุฑุฏู:
- ุจุนุฏ ุงุฒ submit โ ุฑุฏุงุฑฺฉุช ูโุดุฏู ุจู ุตูุญู ูุงฺฏู.
- ุฎุทุงูุง validation ุฏุฑุณุช ูุดูู ุฏุงุฏู ูโุดุฏู.
- **ุงูุง ุฏุงุฏูโูุง ูุฑู (ูุซูุงู ุงูู)** ุฏูุจุงุฑู ุฎุงู ุจูุฏู! โ

ฺุฑุงุ  
ฺูู ูุง ุฏฺฏู ุชู ุณุณุชู ุฌุฏุฏููู ุงุฒ ุงูฺฏู **Post-Redirect-Get (PRG)** ุงุณุชูุงุฏู ูโฺฉูู.  
ููุช `POST` ูโุฒูู ู ุจุนุฏ `redirect` ูโฺฉููุ `$_POST` ุฏฺฏู ุฏุฑ ุตูุญู ููุตุฏ ุฏุฑ ุฏุณุชุฑุณ ูุณุช.

---
## ๐น ุงุฏุขูุฑ ุงุฒ ุณุณุชู ูุฏู

ูุจูุงู ูุณุชููุงู ุจุนุฏ ุงุฒ `POST` ูููู view ุฑู ุฑูุฏุฑ ูโฺฉุฑุฏู. ุจูุงุจุฑุงู:
```php
value=" <?= $_POST['email'] ?? '' ?> "
```
ฺฉุงุฑ ูโฺฉุฑุฏุ ฺูู `$_POST` ูููุฒ ูุฌูุฏ ุฏุงุดุช.  
ูู ุงูุงู ุฏฺฏู ุจุนุฏ ุงุฒ redirect ูฺ `$_POST`ุง ูุฏุงุฑู.

---
## ๐น ุฑุงูโุญู: Flash old data

ูุซู ุฎุทุงูุง ฺฉู ุจุง **session flash** ุฐุฎุฑู ฺฉุฑุฏูุ ุญุงูุง ุฏุงุฏูโูุง ูุฏู ูุฑู (old form data) ุฑู ูู flash ูโฺฉูู.
### 1) ุฐุฎุฑู ุฏุฑ ฺฉูุชุฑูุฑ
ุฏุฑูุงู store.php :
```php
// ููุช login fail ุดุฏ:
Session::flash('old', [
    'email' => $_POST['email']
]);
// redirect back
return Redirect("/laracast-php/public/login");
```
โ๏ธ ููุท ุงูู ุฑู ุฐุฎุฑู ูโฺฉููุ ฺูู ูพุณูุฑุฏ **ูุฑฺฏุฒ ูุจุงุฏ ุฏูุจุงุฑู ูพุฑ ุจุดู**.

---
### 2) ฺฏุฑูุชู ุฏุฑ view

ุฏุฑ create.view.php` ุจุงุฏ ุฏุงุฏูโ ุฐุฎุฑูโุดุฏู ุฑู ุจุฎููู:
```php
<input type="email" name="email"
       value="<?= $_SESSION['_flash']['old']['email'] ?? '' ?>">
```
ูู ุงูุฌูุฑ ุจุฏุฎุท ูุดู.

---
### 3) ุงุณุชูุงุฏู ุงุฒ ูุชุฏ `get` ุฏุฑ Session
ูุง ูุจูุงู ู ูุชุฏ `get` ุชู `Session` ุณุงุฎุชู ุจูุฏู ฺฉู ุฑุงุญุชโุชุฑ ููุด ุฑู ูโุฎููู. ูพุณ ูโููุณู:
```php
value="<?= Core\Session::get('old')['email'] ?? '' ?>"
```
---
### 4) ุจูุชุฑ ฺฉุฑุฏู ุจุง helper function

ูููุฒ ฺฉุฏ ุทููุงูู. ูพุณ ูุงู ุชู `functions.php` ู helper ุจู ุงุณู `old()` ูโููุณู:
```php
function old($key , $default =''){  
    return core\session::get('old')[$key] ?? $default;  
}
```
---
### 5) ุงุณุชูุงุฏู ุณุงุฏู ุฏุฑ view
ุญุงูุง ุชู ูุฑู ุฎู ุฑุงุญุช ูโููุณู:
```php
<input id="email" type="email" name="email" required autocomplete="new-email" 
value="<?= old('email') ?? ' '; ?>"
```
---
### 6) ูุงุจูุช default ุณูุงุฑุด
ุงู helper ุญุช ุงุฌุงุฒู ูโุฏู ููุฏุงุฑ ูพุดโูุฑุถ ุฏูุฎูุงู ูู ุจุฏ:
```php
value="<?= old('email', $user->email) ?>"
```
ุนู ุงฺฏุฑ ุงูู ูุฏู ูุฌูุฏ ูุฏุงุดุชุ ุงุฒ ุงูู ฺฉุงุฑุจุฑ ูุงฺฏูโุดุฏู ุงุณุชูุงุฏู ฺฉู.

---
## ๐น ูุชุฌู
- ุงฺฏุฑ ฺฉุงุฑุจุฑ ูุฑู ุฑู ูพุฑ ฺฉูู ู ุฎุทุง ุจุดู โ ุจุนุฏ ุงุฒ redirect ุงููุด ุฏูุจุงุฑู ุชู ููุฏ ูุณุช โ
- ูพุณูุฑุฏ ููุดู ุฎุงู ูโูููู โ
- ฺฉุฏ ุชูุฒ ู ฺฉูุชุงู ุดุฏู โ
  ๐ฏ ูพุณ ูููโุชุฑู ูฺฉุชูโ ุงู ุฌูุณู ุงูู ฺฉู ุจุง ุณุณุชู **PRG** ุฏฺฏู ููโุชูู ุงุฒ `$_POST` ูุณุชูู ุงุณุชูุงุฏู ฺฉู.  
  ุจุงุฏ ุฏุงุฏูโูุง ูุฏู ูุฑู ุฑู ูู ูุซู ุฎุทุงูุง **ููุด** ฺฉู ุชู ุณุดูุ ุจุนุฏ ุจุง ฺฉ helper (ูุซู `old()`) ุฏูุจุงุฑู ุชู view ููุงุด ุจุฏ.